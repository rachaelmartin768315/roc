# Test Platforms

This directory contains test platforms for the Roc interpreter, demonstrating different argument types and platform functionality.

## Available Platforms

### String Platform (`str/`)
- **Platform**: Simple string processing platform
- **Function signature**: `Str -> Str`
- **Description**: Takes a string from the host and returns a processed string

### Integer Platform (`int/`)
- **Platform**: Multi-argument integer platform
- **Function signature**: `I64, I64 -> I64`
- **Description**: Takes two random integers from the host and returns their product

## Building and Running

### 1. Build Roc with LLVM Support

```bash
zig build -Dllvm
```

```bash
# With evaluation tracing debug output
zig build -Dllvm -Dtrace-eval
```

### 2. Run Test Applications

#### String Platform
```bash
# Run (uses cached interpreter shim if already built)
./zig-out/bin/roc test/platform/str/app.roc

# Run (rebuild interpreter shim, ignore any cached files)
./zig-out/bin/roc --no-cache test/platform/str/app.roc
```

#### Integer Platform
```bash
# Run (uses cached interpreter shim if already built)
./zig-out/bin/roc test/platform/int/app.roc

# Run (rebuild interpreter shim, ignore any cached files)
./zig-out/bin/roc --no-cache test/platform/int/app.roc
```

## Architecture

Each platform consists of:
- **`main.roc`**: the platform module
- **`app.roc`**: an example application using the platform
- **`host.zig`**: the platform host implementation that calls into the roc app and provides IO
- **`libhost.a`**: the compiled host library (generated by zig's build system)
